{% extends "inventory/base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è ‚Äî –£—á—ë—Ç{% endblock %}

{% block content %}
<h1>–ó–∞–ø–∞—Å–Ω—ã–µ —á–∞—Å—Ç–∏ –¥–ª—è —Ä–µ–º–æ–Ω—Ç–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</h1>
<form method="get" class="mb-4">
<form method="get" class="mb-4">
  <div class="input-group">
    <input type="text" name="q" value="{{ request.GET.q }}"
           class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é...">
    <button class="btn btn-outline-secondary" type="submit"> –ù–∞–π—Ç–∏</button>
  </div>
</form>
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="{% url 'section_selection' %}"></a>
            <div class="navbar-nav">
              {% if user.is_staff %}
                <a class ='nav-link' href="{% url 'add_consumable' %}">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é</a>
                {% endif %}
            </div>
        </div>
    </nav>


{% if page_obj%}
  <div class="row">
    {% for item in page_obj %}
      <div class="col-md-6 mb-3">
        <div class="card">
          <div class="card-body">
          {% if item.image %}
  <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ -->
          <a href="#" onclick="openModal('{{ item.image.url }}', '{{ item.name }}'); return false;">
            <img src="{{ item.image.url }}" class="img-fluid rounded mb-2" alt="{{ item.name }}" style="max-height: 150px; object-fit: contain; cursor: zoom-in;">
           </a>
          {% else %}
            <div class="text-muted mb-2">üì∑ –ë–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
          {% endif %}

            <h5 class="card-title">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ: {{ item.name }}</h5>
            <p class="card-text">
              <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> {{ item.quantity }}<br>
              <strong>–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è:</strong> {{ item.modification }}<br>
              <strong>–ú–æ–¥–µ–ª—å:</strong> {{ item.model }}<br>
              {% if item.description %}
                <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ item.description }}
              {% else %}
                <em>–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è</em>
              {% endif %}
            </p>
            <div class="mt-3">

            <form method="post" action="{% url 'create_request' item.pk %}?next={{ request.get_full_path|urlencode }}">
              {% csrf_token %}
              <div class="input-group mb-2">
                <label class="input-group-text" for="quantity_{{ item.pk }}">–ö–æ–ª-–≤–æ</label>
                <input type="number" name="quantity" min="1" max="{{ item.quantity }}" id="quantity_{{ item.pk }}" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
              </div>
              {% if not user.is_staff %}
              <button type="submit" class="btn btn-sm btn-primary">–ó–∞–ø—Ä–æ—Å–∏—Ç—å</button>
              {% endif %}
            </form>
              {% if user.is_staff %}
              <a href="{% url 'edit_consumable' item.pk  %}" class="btn btn-sm btn-outline-primary">–ò–∑–º–µ–Ω–∏—Ç—å</a>
              <a href="{% url 'delete_consumable' item.pk %}" class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</a>
              {% endif %}
            </div>
          </div> <!-- card-body -->
        </div> <!-- card -->
      </div> <!-- col-md-6 -->
    {% endfor %}
    <!-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–≥–æ </div> –æ—Ç .row -->
{% if page_obj.has_other_pages %}
  <nav aria-label="–°—Ç—Ä–∞–Ω–∏—Ü—ã">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1{% if query %}&q={{ query }}{% endif %}">–ü–µ—Ä–≤–∞—è</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if query %}&q={{ query }}{% endif %}">–ù–∞–∑–∞–¥</a>
        </li>
      {% endif %}

      <li class="page-item disabled">
        <span class="page-link">–°—Ç—Ä. {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</span>
      </li>

      {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if query %}&q={{ query }}{% endif %}">–í–ø–µ—Ä—ë–¥</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}{% if query %}&q={{ query }}{% endif %}">–ü–æ—Å–ª–µ–¥–Ω—è—è</a>
        </li>
      {% endif %}
    </ul>
  </nav>
{% endif %}
  </div>
{% else %}
  <p class="text-muted">
    {% if query %}
      –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}".
    {% else %}
      –ù–µ—Ç —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤. –î–æ–±–∞–≤—å—Ç–µ –∏—Ö —á–µ—Ä–µ–∑ <a href="/admin/inventory/consumable/">–∞–¥–º–∏–Ω–∫—É</a>.
    {% endif %}
  </p>
{% endif %}

{% endblock %}